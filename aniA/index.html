<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ìºë¦­í„° ì• ë‹ˆë©”ì´ì…˜</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>
<body>
    <script>
        // ì´ë¯¸ì§€ ë³€ìˆ˜ ì„ ì–¸ (íŒŒì¼ëª…ê³¼ ë™ì¼)
        let earlyAHead, earlyARightArm, earlyALeftArm, earlyABody, earlyAFace, happyAFace, sadAFace, ARightArmV
        let moveABody, moveARightArm, moveALeftArm, moveARightLeg, moveALeftLeg, moveHappyAFace, moveSadAFace
        let bg
        let currentState = 'early'
        let imageX, imageY
        let sadAStartFrame = 0
        let happyAStartFrame = 0

        // ì›ë³¸ ìº”ë²„ìŠ¤ í¬ê¸°
        const origW = 600
        const origH = 600
        let scaleFactor, offsetX, offsetY;

        function preload() {
            // ëª¨ë“  ì—ì…‹ í”„ë¦¬ë¡œë“œ
            earlyAHead     = loadImage('earlyAHead.png')
            earlyARightArm = loadImage('earlyARightArm.png')
            earlyALeftArm  = loadImage('earlyALeftArm.png')
            earlyABody     = loadImage('earlyABody.png')
            earlyAFace     = loadImage('earlyAFace.png')
            happyAFace     = loadImage('happyAFace.png')
            sadAFace       = loadImage('sadAFace.png')
            ARightArmV     = loadImage('ARightArmV.png')
            moveABody      = loadImage('moveABody.png')
            moveARightArm  = loadImage('moveARightArm.png')
            moveALeftArm   = loadImage('moveALeftArm.png')
            moveARightLeg  = loadImage('moveARightLeg.png')
            moveALeftLeg   = loadImage('moveALeftLeg.png')
            moveHappyAFace = loadImage('moveHappyAFace.png')
            moveSadAFace   = loadImage('moveSadAFace.png')
            bg             = loadImage('bg.png')
        }

        function setup() {
            createCanvas(400, 600)
            scaleFactor = min(width / origW, height / 600)
            offsetX     = (width  - 600 * scaleFactor) / 2
            offsetY     = (height - 600 * scaleFactor) / 2
            imageX = origW / 2
            imageY = 600 / 2
        }

        function draw() {
                        translate(offsetX, offsetY)
            scale(scaleFactor)
            push()
            
            imageMode(CENTER)
            image(bg, imageX, imageY, origW, 900)
            drawCharacterA()
            drawButtons()
            pop()
        }

        // ì´ˆê¸° ìƒíƒœ ë“œë¡œì‰ í•¨ìˆ˜
        function drawEarlyA() {
            image(earlyAHead,     imageX, imageY, origW, origH)
            image(earlyARightArm, imageX, imageY, origW, origH)
            image(earlyALeftArm,  imageX, imageY, origW, origH)
            image(earlyABody,     imageX, imageY, origW, origH)
            image(earlyAFace,     imageX, imageY, origW, origH)
        }

        // í–‰ë³µí•œ ìƒíƒœ í•¨ìˆ˜ //ai ì‚¬ìš©
        function drawHappyA() {
            let moveTime = frameCount - happyAStartFrame
            if (moveTime < 60) {
                image(earlyAHead,     imageX, imageY, origW, origH)
                image(earlyALeftArm,  imageX, imageY, origW, origH)
                image(ARightArmV,      imageX, imageY, origW, origH)
                image(earlyABody,     imageX, imageY, origW, origH)
                image(happyAFace,     imageX, imageY, origW, origH)
            } else {
                let baseX = imageX + (moveTime - 60)
                let armSwing = sin(frameCount * 0.1) * 0.4
                let legSwing = sin(frameCount * 0.1 + PI) * 0.4

                // ì™¼íŒ”
                push()
                translate(baseX, imageY)
                translate(25, -15)
                rotate(-armSwing)
                image(moveALeftArm, -20, 15, origW, origH)
                pop()

                // ì™¼ë‹¤ë¦¬
                push()
                translate(baseX, imageY)
                translate(25, 100)
                rotate(-legSwing)
                image(moveALeftLeg, -20, -80, origW, origH)
                pop()

                // ì˜¤ë¥¸ë‹¤ë¦¬
                push()
                translate(baseX, imageY)
                translate(25, 100)
                rotate(legSwing)
                image(moveARightLeg, -20, -80, origW, origH)
                pop()

                // ëª¸í†µ ë° ì–¼êµ´
                image(moveABody,      baseX, imageY, origW, origH)
                image(moveHappyAFace, baseX, imageY, origW, origH)

                // ì˜¤ë¥¸íŒ”
                push()
                translate(baseX, imageY)
                translate(25, -15)
                rotate(armSwing)
                image(moveARightArm, -20, 15, origW, origH)
                pop()
            }
        }

        // ìŠ¬í”ˆ ìƒíƒœ í•¨ìˆ˜ //aiì‚¬ìš©ìš©
        function drawSadA() {
            let moveTime = frameCount - sadAStartFrame
            if (moveTime < 60) {
                image(earlyAHead,      imageX, imageY, origW, origH)
                image(earlyALeftArm,   imageX, imageY, origW, origH)
                image(earlyARightArm,  imageX, imageY, origW, origH)
                image(earlyABody,      imageX, imageY, origW, origH)
                image(sadAFace,        imageX, imageY, origW, origH)
            } else {
                let baseX = imageX + (moveTime - 60)
                let armSwing = sin(frameCount * 0.1) * 0.4
                let legSwing = sin(frameCount * 0.1 + PI) * 0.4

                // ì™¼íŒ”
                push()
                translate(baseX, imageY)
                translate(25, -15)
                rotate(-armSwing)
                image(moveALeftArm, -20, 15, origW, origH)
                pop()

                // ì™¼ë‹¤ë¦¬
                push()
                translate(baseX, imageY)
                translate(25, 100)
                rotate(-legSwing)
                image(moveALeftLeg, -20, -80, origW, origH)
                pop()

                // ì˜¤ë¥¸ë‹¤ë¦¬
                push()
                translate(baseX, imageY)
                translate(25, 100)
                rotate(legSwing)
                image(moveARightLeg, -20, -80, origW, origH)
                pop()

                // ëª¸í†µ ë° ì–¼êµ´
                image(moveABody,     baseX, imageY, origW, origH)
                image(moveSadAFace,  baseX, imageY, origW, origH)

                // ì˜¤ë¥¸íŒ”
                push()
                translate(baseX, imageY)
                translate(25, -15)
                rotate(armSwing)
                image(moveARightArm, -20, 15, origW, origH)
                pop()
            }
        }
        function drawButtons() { //ë²„íŠ¼ ê·¸ë¦¬ëŠ” í•¨ìˆ˜ aiì‚¬ìš©ìš©

            textAlign(CENTER, CENTER)
  textSize(20)
  fill(0)
  text("ë‹¹ì‹ ì´ í–ˆë˜ ë§ì€?", width / 2+100, 100) // ë²„íŠ¼ ìœ„ìª½ì— ì¶œë ¥

    rectMode(CENTER)
    textAlign(CENTER, CENTER)
    textSize(20)
    noStroke()

    // ê³µí†µ ë²„íŠ¼ ìŠ¤íƒ€ì¼
    const btnW = 120
    const btnH = 50
    const btnRadius = 15

    // ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì²´í¬
    const isHoverHappy = mouseX > 150 - btnW/2 && mouseX < 150 + btnW/2 && mouseY > 100 - btnH/2 && mouseY < 100 + btnH/2
    const isHoverSad = mouseX > 450 - btnW/2 && mouseX < 450 + btnW/2 && mouseY > 100 - btnH/2 && mouseY < 100 + btnH/2

    // ğŸ˜Š ê¸ì • ë²„íŠ¼
    push();
    fill(isHoverHappy ? color(255, 230, 150) : color(255, 215, 100)) // hover ìƒ‰ìƒ
    drawingContext.shadowBlur = 10
    drawingContext.shadowColor = 'rgba(0,0,0,0.2)'
    drawingContext.shadowOffsetY = 2
    rect(150, 100, btnW, btnH, btnRadius)
    noStroke()
    fill(50)
    text("ğŸ˜Š ê¸ì •", 150, 100)
    pop()

    // ğŸ˜¢ ë¶€ì • ë²„íŠ¼
    push()
    fill(isHoverSad ? color(180, 220, 255) : color(130, 180, 255))// hover ìƒ‰ìƒ
    drawingContext.shadowBlur = 10
    drawingContext.shadowColor = 'rgba(0,0,0,0.2)'
    drawingContext.shadowOffsetY = 2
    rect(450, 100, btnW, btnH, btnRadius)
    noStroke()
    fill(30)
    text("ğŸ˜¢ ë¶€ì •", 450, 100)
    pop()
}

        function drawCharacterA() {
            
            if (currentState === 'early') drawEarlyA()
            else if (currentState === 'happy') drawHappyA()
            else if (currentState === 'sad') drawSadA()
        }

        function mousePressed() {//ë²„íŠ¼ í´ë¦­í•˜ëŠ” ìœ„ì¹˜ aiì‚¬ìš©ìš©
    // scale()ê³¼ translate() ì ìš© ì „ì˜ ì›ë˜ ì¢Œí‘œë¡œ ë˜ëŒë¦¼
    const scaledX = (mouseX - offsetX) / scaleFactor;
    const scaledY = (mouseY - offsetY) / scaleFactor;

    // ê¸ì • ë²„íŠ¼ í´ë¦­ (ë²„íŠ¼ ì¤‘ì‹¬: x=150, y=100, í¬ê¸°: 120x50)
    if (scaledX > 150 - 60 && scaledX < 150 + 60 && scaledY > 100 - 25 && scaledY < 100 + 25) {
        currentState = 'happy';
        happyAStartFrame = frameCount;
    }
    // ë¶€ì • ë²„íŠ¼ í´ë¦­ (ë²„íŠ¼ ì¤‘ì‹¬: x=450, y=100, í¬ê¸°: 120x50)
    else if (scaledX > 450 - 60 && scaledX < 450 + 60 && scaledY > 100 - 25 && scaledY < 100 + 25) {
        currentState = 'sad';
        sadAStartFrame = frameCount;
    }
    // ë‚˜ë¨¸ì§€ëŠ” ì´ˆê¸° ìƒíƒœ
    else {
        currentState = 'early';
    }
}

    </script>
</body>
</html>